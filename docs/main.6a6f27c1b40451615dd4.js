(()=>{"use strict";var e=function(e){var t=document.querySelector('[data-form="feedback-form"]'),n=t.querySelectorAll("[data-form-input]"),r=t.querySelectorAll("[data-form-label]"),o=t.querySelectorAll("[data-form-error]"),a=t.querySelector("[data-form-submit]"),c=a.innerHTML,i=function(e,t){var n=e.previousElementSibling,r=e.nextElementSibling;e.classList.contains("error")||e.classList.add("error"),n.classList.contains("error")||n.classList.add("error"),""===r.innerHTML&&(r.innerHTML=t)},s=function(e){var t=e.previousElementSibling,n=e.nextElementSibling;e.classList.contains("error")&&e.classList.remove("error"),t.classList.contains("error")&&t.classList.remove("error"),""!==n.innerHTML&&(n.innerHTML="")};return t.addEventListener("submit",(function(t){t.preventDefault();var r=[];if(n.forEach((function(e){return r.push(function(e){switch(e.dataset.formInput){case"email":return e.value.match(/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/)?(s(e),!0):(i(e,"Invalid email"),!1);case"name":return 2!==e.value.trim().split(" ").length?(i(e,"Invalid full name"),!1):(s(e),!0);default:return""===e.value?(i(e,"Required field"),!1):(s(e),!0)}}(e))})),r.filter((function(e){return!!e})).length===n.length){var o={};n.forEach((function(e){return o[e.name]=e.value})),e(o)}})),{resetForm:function(){n.forEach((function(e,t){e.value="",e.classList.contains("error")&&e.classList.remove("error"),r[t].classList.contains("error")&&r[t].classList.remove("error"),""!==o[t].innerHTML&&(o[t].innerHTML="")}))},disableForm:function(){n.forEach((function(e){e.disabled=!0,a.disabled=!0,a.innerHTML="Sending..."}))},enableForm:function(){n.forEach((function(e){e.disabled=!1,a.disabled=!1,a.innerHTML=c}))}}},t=function(e,t){var n=document.querySelector("body"),r=document.querySelector('[data-modal="'.concat(e,'"]')),o=r.querySelector("[data-modal-container]"),a=r.querySelector("[data-modal-close]"),c=function(){n.classList.remove("fixed"),r.classList.add("hidden")},i=function(){c(),t()};return r.addEventListener("click",i),o.addEventListener("click",(function(e){e.stopPropagation()})),a.addEventListener("click",i),{openModal:function(){n.classList.add("fixed"),r.classList.remove("hidden")},closeModal:c}};document.addEventListener("DOMContentLoaded",(function(){var n;n=document.querySelector("[data-header]"),window.addEventListener("scroll",(function(){window.scrollY>n.getBoundingClientRect().height?n.classList.add("sticky"):n.classList.remove("sticky")}));var r,o,a,c=document.querySelector('[data-action-btn="feedback-btn"]'),i=e((function(e){l(),u(e).then((function(e){return y(e?"Your message successfully sent!":"Form sent unsuccessful")})).catch((function(e){return y(e)})).finally((function(){L(),s(),d(),h()}))})),s=i.resetForm,l=i.disableForm,d=i.enableForm,u={fetchFeedbackData:function(e){return new Promise((function(t,n){fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify({title:"New post",body:"".concat(e.email," ").concat(e.name," ").concat(e.message),userId:1})}).then((function(e){return e.json()})).then((function(e){return t(!!e.id)})).catch((function(){n("Form sent unsuccessful")}))}))}}.fetchFeedbackData,f=t("feedback-modal",s),m=f.openModal,L=f.closeModal,v=t("result-modal",(function(){})),h=v.openModal,b=v.closeModal,y=(r=function(){b(),y("")},o=document.querySelector('[data-modal="result-modal"]'),a=o.querySelector("[data-modal-text]"),o.querySelector("[data-modal-close]").addEventListener("click",r),{setResultText:function(e){a.innerHTML=e}}).setResultText;c.addEventListener("click",m)}))})();